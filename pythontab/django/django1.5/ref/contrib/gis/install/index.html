
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.pythontab.com/django/django1.5/ref/contrib/gis/install/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:57:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GeoDjango Installation &mdash; Django 中文手册 1.5 documentation</title>
  
  
  
    
  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  
  
   
  <script src="../../../../_static/js/modernizr.min.js"></script>
</head>
<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../contents.html" class="icon icon-home"> Django 中文手册
          

          
          </a>

          
            
            
              <div class="version">
                1.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.pythontab.com/django/django1.5/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../index-2.html">Django 中文文档</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/index.html">新手入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../topics/index.html">使用 Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howto/index.html">&#8220;How-to&#8221; guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/index.html">Django FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API 参考</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../class-based-views/index.html">Class-based views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../clickjacking.html">Clickjacking Protection</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html"><code class="docutils literal"><span class="pre">contrib</span></code> packages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../admin/index.html">The Django admin site</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html"><code class="docutils literal"><span class="pre">django.contrib.auth</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#user">User</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#anonymous-users">Anonymous users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#permission">Permission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#group">Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#module-django.contrib.auth.signals">Login and logout signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../auth.html#module-django.contrib.auth.backends">Authentication backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../comments/index.html">Django&#8217;s comments framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contenttypes.html">The contenttypes framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../csrf.html">Cross Site Request Forgery protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../databrowse.html">Databrowse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flatpages.html">The flatpages app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../formtools/index.html">django.contrib.formtools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">GeoDjango</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../tutorial.html">GeoDjango Tutorial</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">GeoDjango Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../model-api.html">GeoDjango Model API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../db-api.html">GeoDjango Database API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../geoquerysets.html">GeoQuerySet API Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../measure.html">Measurement Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../geos.html">GEOS API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gdal.html">GDAL API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../geoip.html">Geolocation with GeoIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../utils.html">GeoDjango Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../commands.html">GeoDjango Management Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin.html">GeoDjango&#8217;s admin site</a></li>
<li class="toctree-l4"><a class="reference internal" href="../feeds.html">Geographic Feeds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sitemaps.html">Geographic Sitemaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../testing.html">Testing GeoDjango apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deployment.html">Deploying GeoDjango</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../humanize.html">django.contrib.humanize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../localflavor.html">The &#8220;local flavor&#8221; add-ons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../markup.html">django.contrib.markup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../messages.html">The messages framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../redirects.html">The redirects app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sitemaps.html">The sitemap framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sites.html">The &#8220;sites&#8221; framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../staticfiles.html">The staticfiles app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../syndication.html">The syndication feed framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../webdesign.html">django.contrib.webdesign</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#admin">admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#auth">auth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#comments">comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#contenttypes">contenttypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#csrf">csrf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#flatpages">flatpages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#formtools">formtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#gis">gis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#humanize">humanize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#localflavor">localflavor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#markup">markup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#messages">messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#redirects">redirects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#sessions">sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#sites">sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#sitemaps">sitemaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#syndication">syndication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#webdesign">webdesign</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#other-add-ons">Other add-ons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../databases.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../django-admin.html">django-admin.py and manage.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../django-admin.html#running-management-commands-from-your-code">Running management commands from your code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../exceptions.html">Django 异常</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../files/index.html">File handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../forms/index.html">Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../middleware.html">Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../models/index.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../request-response.html">Request and response objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../template-response.html">TemplateResponse and SimpleTemplateResponse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../signals.html">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../templates/index.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../unicode.html">Unicode data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../urlresolvers.html"><code class="docutils literal"><span class="pre">django.core.urlresolvers</span></code> utility functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../urls.html"><code class="docutils literal"><span class="pre">django.conf.urls</span></code> utility functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../utils.html">Django Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../validators.html">Validators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../misc/index.html">Meta-documentation and miscellany</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../internals/index.html">Django internals</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../contents.html">Django 中文手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../contents.html"> &mdash; Django 中文手册 1.5 documentation</a> &raquo;</li>
      
          <li><a href="../../../index.html">API 参考</a> &raquo;</li>
      
          <li><a href="../../index.html"><code class="docutils literal"><span class="pre">contrib</span></code> packages</a> &raquo;</li>
      
          <li><a href="../index.html">GeoDjango</a> &raquo;</li>
      
    <li>GeoDjango Installation</li>
      <li class="wy-breadcrumbs-aside">
        
            <a href="../../../../../../index.html" class="fa fa-github"> 在线手册中心</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geodjango-installation">
<span id="ref-gis-install"></span><h1>GeoDjango Installation<a class="headerlink" href="#geodjango-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In general, GeoDjango installation requires:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#django"><span>Python and Django</span></a></li>
<li><a class="reference internal" href="#spatial-database"><span>Spatial database</span></a></li>
<li><a class="reference internal" href="geolibs.html#geospatial-libs"><span>Installing Geospatial libraries</span></a></li>
</ol>
<p>Details for each of the requirements and installation instructions
are provided in the sections below. In addition, platform-specific
instructions are available for:</p>
<ul class="simple">
<li><a class="reference internal" href="#macosx"><span>Mac OS X</span></a></li>
<li><a class="reference internal" href="#windows"><span>Windows</span></a></li>
</ul>
<div class="admonition-use-the-source admonition">
<p class="first admonition-title">Use the Source</p>
<p class="last">Because GeoDjango takes advantage of the latest in the open source geospatial
software technology, recent versions of the libraries are necessary.
If binary packages aren&#8217;t available for your platform, installation from
source may be required. When compiling the libraries from source, please
follow the directions closely, especially if you&#8217;re a beginner.</p>
</div>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python-and-django">
<span id="django"></span><h3>Python and Django<a class="headerlink" href="#python-and-django" title="Permalink to this headline">¶</a></h3>
<p>Because GeoDjango is included with Django, please refer to Django&#8217;s
<a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span>installation instructions</span></a> for details on
how to install.</p>
</div>
<div class="section" id="spatial-database">
<span id="id1"></span><h3>Spatial database<a class="headerlink" href="#spatial-database" title="Permalink to this headline">¶</a></h3>
<p>PostgreSQL (with PostGIS), MySQL (mostly with MyISAM engine), Oracle, and SQLite
(with SpatiaLite) are the spatial databases currently supported.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PostGIS is recommended, because it is the most mature and feature-rich
open source spatial database.</p>
</div>
<p>The geospatial libraries required for a GeoDjango installation depends
on the spatial database used.  The following lists the library requirements,
supported versions, and any notes for each of the supported database backends:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="21%" />
<col width="13%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Database</th>
<th class="head">Library Requirements</th>
<th class="head">Supported Versions</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostgreSQL</td>
<td>GEOS, PROJ.4, PostGIS</td>
<td>8.2+</td>
<td>Requires PostGIS.</td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td>GEOS</td>
<td>5.x</td>
<td>Not OGC-compliant; <a class="reference internal" href="../db-api.html#mysql-spatial-limitations"><span>limited functionality</span></a>.</td>
</tr>
<tr class="row-even"><td>Oracle</td>
<td>GEOS</td>
<td>10.2, 11</td>
<td>XE not supported; not tested with 9.</td>
</tr>
<tr class="row-odd"><td>SQLite</td>
<td>GEOS, GDAL, PROJ.4, SpatiaLite</td>
<td>3.6.+</td>
<td>Requires SpatiaLite 2.3+, pysqlite2 2.5+</td>
</tr>
</tbody>
</table>
<p>See also <a class="reference external" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS">this comparison matrix</a> on the OSGeo Wiki for
PostgreSQL/PostGIS/GEOS/GDAL possible combinations.</p>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="geospatial-libraries">
<h3>Geospatial libraries<a class="headerlink" href="#geospatial-libraries" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="geolibs.html">Installing Geospatial libraries</a></li>
</ul>
</div>
</div>
<div class="section" id="database-installation">
<h3>Database installation<a class="headerlink" href="#database-installation" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="postgis.html">Installing PostGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="spatialite.html">Installing Spatialite</a></li>
</ul>
</div>
</div>
<div class="section" id="add-django-contrib-gis-to-installed-apps">
<h3>Add <code class="docutils literal"><span class="pre">django.contrib.gis</span></code> to <a class="reference internal" href="../../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></code></a><a class="headerlink" href="#add-django-contrib-gis-to-installed-apps" title="Permalink to this headline">¶</a></h3>
<p>Like other Django contrib applications, you will <em>only</em> need to add
<a class="reference internal" href="../index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal"><span class="pre">django.contrib.gis</span></code></a> to <a class="reference internal" href="../../../settings.html#std:setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></code></a> in your settings.
This is the so that <code class="docutils literal"><span class="pre">gis</span></code> templates can be located &#8211; if not done, then
features such as the geographic admin or KML sitemaps will not function properly.</p>
</div>
<div class="section" id="add-google-projection-to-spatial-ref-sys-table">
<span id="addgoogleprojection"></span><h3>Add Google projection to <code class="docutils literal"><span class="pre">spatial_ref_sys</span></code> table<a class="headerlink" href="#add-google-projection-to-spatial-ref-sys-table" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you&#8217;re running PostGIS 1.4 or above, you can skip this step. The entry
is already included in the default <code class="docutils literal"><span class="pre">spatial_ref_sys</span></code> table.</p>
</div>
<p>In order to conduct database transformations to the so-called &#8220;Google&#8221;
projection (a spherical mercator projection used by Google Maps),
an entry must be added to your spatial database&#8217;s <code class="docutils literal"><span class="pre">spatial_ref_sys</span></code> table.
Invoke the Django shell from your project and execute the
<code class="docutils literal"><span class="pre">add_srs_entry</span></code> function:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">$ python manage.py shell</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.gis.utils</span> <span class="kn">import</span> <span class="n">add_srs_entry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_srs_entry</span><span class="p">(</span><span class="mi">900913</span><span class="p">)</span>
</pre></div>
</div>
<p>This adds an entry for the 900913 SRID to the <code class="docutils literal"><span class="pre">spatial_ref_sys</span></code> (or equivalent)
table, making it possible for the spatial database to transform coordinates in
this projection.  You only need to execute this command <em>once</em> per spatial database.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>If you can&#8217;t find the solution to your problem here then participate in the
community!  You can:</p>
<ul class="simple">
<li>Join the <code class="docutils literal"><span class="pre">#geodjango</span></code> IRC channel on FreeNode. Please be patient and polite
&#8211; while you may not get an immediate response, someone will attempt to answer
your question as soon as they see it.</li>
<li>Ask your question on the <a class="reference external" href="http://groups.google.com/group/geodjango">GeoDjango</a> mailing list.</li>
<li>File a ticket on the <a class="reference external" href="https://code.djangoproject.com/newticket">Django trac</a> if you think there&#8217;s a bug.  Make
sure to provide a complete description of the problem, versions used,
and specify the component as &#8220;GIS&#8221;.</li>
</ul>
<div class="section" id="library-environment-settings">
<span id="libsettings"></span><h3>Library environment settings<a class="headerlink" href="#library-environment-settings" title="Permalink to this headline">¶</a></h3>
<p>By far, the most common problem when installing GeoDjango is that the
external shared libraries (e.g., for GEOS and GDAL) cannot be located. <a class="footnote-reference" href="#id26" id="id5">[1]</a>
Typically, the cause of this problem is that the operating system isn&#8217;t aware
of the directory where the libraries built from source were installed.</p>
<p>In general, the library path may be set on a per-user basis by setting
an environment variable, or by configuring the library path for the entire
system.</p>
<div class="section" id="ld-library-path-environment-variable">
<h4><code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code> environment variable<a class="headerlink" href="#ld-library-path-environment-variable" title="Permalink to this headline">¶</a></h4>
<p>A user may set this environment variable to customize the library paths
they want to use.  The typical library directory for software
built from source is <code class="docutils literal"><span class="pre">/usr/local/lib</span></code>.  Thus, <code class="docutils literal"><span class="pre">/usr/local/lib</span></code> needs
to be included in the <code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code> variable.  For example, the user
could place the following in their bash profile:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">export LD_LIBRARY_PATH=/usr/local/lib</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-system-library-path">
<h4>Setting system library path<a class="headerlink" href="#setting-system-library-path" title="Permalink to this headline">¶</a></h4>
<p>On GNU/Linux systems, there is typically a file in <code class="docutils literal"><span class="pre">/etc/ld.so.conf</span></code>, which may include
additional paths from files in another directory, such as <code class="docutils literal"><span class="pre">/etc/ld.so.conf.d</span></code>.
As the root user, add the custom library path (like <code class="docutils literal"><span class="pre">/usr/local/lib</span></code>) on a
new line in <code class="docutils literal"><span class="pre">ld.so.conf</span></code>.  This is <em>one</em> example of how to do so:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo <span class="nb">echo</span> /usr/local/lib &gt;&gt; /etc/ld.so.conf
<span class="gp">$</span> sudo ldconfig
</pre></div>
</div>
<p>For OpenSolaris users, the system library path may be modified using the
<code class="docutils literal"><span class="pre">crle</span></code> utility.  Run <code class="docutils literal"><span class="pre">crle</span></code> with no options to see the current configuration
and use <code class="docutils literal"><span class="pre">crle</span> <span class="pre">-l</span></code> to set with the new library path.  Be <em>very</em> careful when
modifying the system library path:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> crle -l <span class="nv">$OLD_PATH</span>:/usr/local/lib
</pre></div>
</div>
</div>
<div class="section" id="install-binutils">
<span id="binutils"></span><h4>Install <code class="docutils literal"><span class="pre">binutils</span></code><a class="headerlink" href="#install-binutils" title="Permalink to this headline">¶</a></h4>
<p>GeoDjango uses the <code class="docutils literal"><span class="pre">find_library</span></code> function (from the <code class="docutils literal"><span class="pre">ctypes.util</span></code> Python
module) to discover libraries.  The <code class="docutils literal"><span class="pre">find_library</span></code> routine uses a program
called <code class="docutils literal"><span class="pre">objdump</span></code> (part of the <code class="docutils literal"><span class="pre">binutils</span></code> package) to verify a shared
library on GNU/Linux systems.  Thus, if <code class="docutils literal"><span class="pre">binutils</span></code> is not installed on your
Linux system then Python&#8217;s ctypes may not be able to find your library even if
your library path is set correctly and geospatial libraries were built perfectly.</p>
<p>The <code class="docutils literal"><span class="pre">binutils</span></code> package may be installed on Debian and Ubuntu systems using the
following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo apt-get install binutils
</pre></div>
</div>
<p>Similarly, on Red Hat and CentOS systems:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo yum install binutils
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="platform-specific-instructions">
<h2>Platform-specific instructions<a class="headerlink" href="#platform-specific-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mac-os-x">
<span id="macosx"></span><h3>Mac OS X<a class="headerlink" href="#mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>Because of the variety of packaging systems available for OS X, users have
several different options for installing GeoDjango. These options are:</p>
<ul class="simple">
<li><a class="reference internal" href="#homebrew"><span>Homebrew</span></a></li>
<li><a class="reference internal" href="#kyngchaos"><span>KyngChaos packages</span></a></li>
<li><a class="reference internal" href="#fink"><span>Fink</span></a></li>
<li><a class="reference internal" href="#macports"><span>MacPorts</span></a></li>
<li><a class="reference internal" href="geolibs.html#build-from-source"><span>Building from source</span></a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, the easiest and recommended approach for installing GeoDjango
on OS X is to use the KyngChaos packages.</p>
</div>
<p>This section also includes instructions for installing an upgraded version
of <a class="reference internal" href="#macosx-python"><span>Python</span></a> from packages provided by the Python Software
Foundation, however, this is not required.</p>
<div class="section" id="python">
<span id="macosx-python"></span><h4>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h4>
<p>Although OS X comes with Python installed, users can use framework
installers (<a class="reference external" href="http://python.org/ftp/python/2.6.6/python-2.6.6-macosx10.3.dmg">2.6</a> and <a class="reference external" href="http://python.org/ftp/python/2.7.3/">2.7</a> are available) provided by
the Python Software Foundation.  An advantage to using the installer is
that OS X&#8217;s Python will remain &#8220;pristine&#8221; for internal operating system
use.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You will need to modify the <code class="docutils literal"><span class="pre">PATH</span></code> environment variable in your
<code class="docutils literal"><span class="pre">.profile</span></code> file so that the new version of Python is used when
<code class="docutils literal"><span class="pre">python</span></code> is entered at the command-line:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">export PATH=/Library/Frameworks/Python.framework/Versions/Current/bin:$PATH</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="homebrew">
<span id="id8"></span><h4>Homebrew<a class="headerlink" href="#homebrew" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a> provides &#8220;recipes&#8221; for building binaries and packages from source.
It provides recipes for the GeoDjango prerequisites on Macintosh computers
running OS X. Because Homebrew still builds the software from source, the
<a class="reference external" href="https://developer.apple.com/technologies/tools/">Apple Developer Tools</a> are required.</p>
<p>Summary:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> brew install postgresql
<span class="gp">$</span> brew install postgis
<span class="gp">$</span> brew install gdal
<span class="gp">$</span> brew install libgeoip
</pre></div>
</div>
</div>
<div class="section" id="kyngchaos-packages">
<span id="kyngchaos"></span><h4>KyngChaos packages<a class="headerlink" href="#kyngchaos-packages" title="Permalink to this headline">¶</a></h4>
<p>William Kyngesburye provides a number of <a class="reference external" href="http://www.kyngchaos.com/software/frameworks">geospatial library binary packages</a>
that make it simple to get GeoDjango installed on OS X without compiling
them from source.  However, the <a class="reference external" href="https://developer.apple.com/technologies/tools/">Apple Developer Tools</a> are still necessary
for compiling the Python database adapters <a class="reference internal" href="#psycopg2-kyngchaos"><span>psycopg2</span></a> (for PostGIS)
and <a class="reference internal" href="spatialite.html#pysqlite2"><span>pysqlite2</span></a> (for SpatiaLite).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">SpatiaLite users should consult the <a class="reference internal" href="spatialite.html#spatialite-macosx"><span>Mac OS X-specific instructions</span></a> section
after installing the packages for additional instructions.</p>
</div>
<p>Download the framework packages for:</p>
<ul class="simple">
<li>UnixImageIO</li>
<li>PROJ</li>
<li>GEOS</li>
<li>SQLite3 (includes the SpatiaLite library)</li>
<li>GDAL</li>
</ul>
<p>Install the packages in the order they are listed above, as the GDAL and SQLite
packages require the packages listed before them.</p>
<p>Afterwards, you can also install the KyngChaos binary packages for <a class="reference external" href="http://www.kyngchaos.com/software/postgres">PostgreSQL
and PostGIS</a>.</p>
<p>After installing the binary packages, you&#8217;ll want to add the following to
your <code class="docutils literal"><span class="pre">.profile</span></code> to be able to run the package programs from the command-line:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">export PATH=/Library/Frameworks/UnixImageIO.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/PROJ.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/GEOS.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/SQLite3.framework/Programs:$PATH</span>
<span class="go">export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH</span>
<span class="go">export PATH=/usr/local/pgsql/bin:$PATH</span>
</pre></div>
</div>
<div class="section" id="psycopg2">
<span id="psycopg2-kyngchaos"></span><h5>psycopg2<a class="headerlink" href="#psycopg2" title="Permalink to this headline">¶</a></h5>
<p>After you&#8217;ve installed the KyngChaos binaries and modified your <code class="docutils literal"><span class="pre">PATH</span></code>, as
described above, <code class="docutils literal"><span class="pre">psycopg2</span></code> may be installed using the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo pip install psycopg2
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t have <code class="docutils literal"><span class="pre">pip</span></code>, follow the <a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span>installation instructions</span></a> to install it.</p>
</div>
</div>
</div>
<div class="section" id="fink">
<span id="id12"></span><h4>Fink<a class="headerlink" href="#fink" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://schwehr.org/blog/">Kurt Schwehr</a> has been gracious enough to create GeoDjango packages for users
of the <a class="reference external" href="http://www.finkproject.org/">Fink</a> package system.  The following packages are available, depending
on which version of Python you want to use:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">django-gis-py26</span></code></li>
<li><code class="docutils literal"><span class="pre">django-gis-py25</span></code></li>
<li><code class="docutils literal"><span class="pre">django-gis-py24</span></code></li>
</ul>
</div>
<div class="section" id="macports">
<span id="id15"></span><h4>MacPorts<a class="headerlink" href="#macports" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.macports.org/">MacPorts</a> may be used to install GeoDjango prerequisites on Macintosh
computers running OS X.  Because MacPorts still builds the software from source,
the <a class="reference external" href="https://developer.apple.com/technologies/tools/">Apple Developer Tools</a> are required.</p>
<p>Summary:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> sudo port install postgresql83-server
<span class="gp">$</span> sudo port install geos
<span class="gp">$</span> sudo port install proj
<span class="gp">$</span> sudo port install postgis
<span class="gp">$</span> sudo port install gdal +geos
<span class="gp">$</span> sudo port install libgeoip
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You will also have to modify the <code class="docutils literal"><span class="pre">PATH</span></code> in your <code class="docutils literal"><span class="pre">.profile</span></code> so
that the MacPorts programs are accessible from the command-line:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">export PATH=/opt/local/bin:/opt/local/lib/postgresql83/bin</span>
</pre></div>
</div>
<p>In addition, add the <code class="docutils literal"><span class="pre">DYLD_FALLBACK_LIBRARY_PATH</span></code> setting so that
the libraries can be found by Python:</p>
<div class="last highlight-console"><div class="highlight"><pre><span class="go">export DYLD_FALLBACK_LIBRARY_PATH=/opt/local/lib:/opt/local/lib/postgresql83</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="windows">
<span id="id17"></span><h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>Proceed through the following sections sequentially in order to install
GeoDjango on Windows.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These instructions assume that you are using 32-bit versions of
all programs.  While 64-bit versions of Python and PostgreSQL 9.x
are available, 64-bit versions of spatial libraries, like
GEOS and GDAL, are not yet provided by the <a class="reference internal" href="#osgeo4w"><span>OSGeo4W</span></a> installer.</p>
</div>
<div class="section" id="id18">
<h4>Python<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>First, download the latest <a class="reference external" href="http://python.org/download/">Python 2.7 installer</a> from the Python Web site.
Next, run the installer and keep the defaults &#8211; for example, keep
&#8216;Install for all users&#8217; checked and the installation path set as
<code class="docutils literal"><span class="pre">C:\Python27</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may already have a version of Python installed in <code class="docutils literal"><span class="pre">C:\python</span></code> as ESRI
products sometimes install a copy there.  <em>You should still install a
fresh version of Python 2.7.</em></p>
</div>
</div>
<div class="section" id="postgresql">
<h4>PostgreSQL<a class="headerlink" href="#postgresql" title="Permalink to this headline">¶</a></h4>
<p>First, download the latest <a class="reference external" href="http://www.enterprisedb.com/products-services-training/pgdownload">PostgreSQL 9.x installer</a> from the
<a class="reference external" href="http://www.enterprisedb.com/">EnterpriseDB</a> Web site.  After downloading, simply run the installer,
follow the on-screen directions, and keep the default options unless
you know the consequences of changing them.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The PostgreSQL installer creates both a new Windows user to be the
&#8216;postgres service account&#8217; and a <code class="docutils literal"><span class="pre">postgres</span></code> database superuser
You will be prompted once to set the password for both accounts &#8211;
make sure to remember it!</p>
</div>
<p>When the installer completes, it will ask to launch the Application Stack
Builder (ASB) on exit &#8211; keep this checked, as it is necessary to
install <a class="reference internal" href="#postgisasb"><span>PostGIS</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If installed successfully, the PostgreSQL server will run in the
background each time the system as started as a Windows service.
A <span class="menuselection">PostgreSQL 9.x</span> start menu group will created
and contains shortcuts for the ASB as well as the &#8216;SQL Shell&#8217;,
which will launch a <code class="docutils literal"><span class="pre">psql</span></code> command window.</p>
</div>
</div>
<div class="section" id="postgis">
<span id="postgisasb"></span><h4>PostGIS<a class="headerlink" href="#postgis" title="Permalink to this headline">¶</a></h4>
<p>From within the Application Stack Builder (to run outside of the installer,
<span class="menuselection">Start ‣ Programs ‣ PostgreSQL 9.x</span>), select
<span class="menuselection">PostgreSQL Database Server 9.x on port 5432</span> from the drop down
menu.  Next, expand the <span class="menuselection">Categories ‣ Spatial Extensions</span> menu
tree and select <span class="menuselection">PostGIS 1.5 for PostgreSQL 9.x</span>.</p>
<p>After clicking next, you will be prompted to select your mirror, PostGIS
will be downloaded, and the PostGIS installer will begin.  Select only the
default options during install (e.g., do not uncheck the option to create a
default PostGIS database).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will be prompted to enter your <code class="docutils literal"><span class="pre">postgres</span></code> database superuser
password in the &#8216;Database Connection Information&#8217; dialog.</p>
</div>
</div>
<div class="section" id="id22">
<h4>psycopg2<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">psycopg2</span></code> Python module provides the interface between Python and the
PostgreSQL database.  Download the latest <a class="reference external" href="http://www.stickpeople.com/projects/python/win-psycopg/">Windows installer</a> for your version
of Python and PostgreSQL and run using the default settings. <a class="footnote-reference" href="#id27" id="id23">[2]</a></p>
</div>
<div class="section" id="osgeo4w">
<span id="id25"></span><h4>OSGeo4W<a class="headerlink" href="#osgeo4w" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="http://trac.osgeo.org/osgeo4w/">OSGeo4W installer</a> makes it simple to install the PROJ.4, GDAL, and GEOS
libraries required by GeoDjango.  First, download the <a class="reference external" href="http://trac.osgeo.org/osgeo4w/">OSGeo4W installer</a>,
and run it.  Select <span class="menuselection">Express Web-GIS Install</span> and click next.
In the &#8216;Select Packages&#8217; list, ensure that GDAL is selected; MapServer and
Apache are also enabled by default, but are not required by GeoDjango and
may be unchecked safely.  After clicking next, the packages will be
automatically downloaded and installed, after which you may exit the
installer.</p>
</div>
<div class="section" id="modify-windows-environment">
<h4>Modify Windows environment<a class="headerlink" href="#modify-windows-environment" title="Permalink to this headline">¶</a></h4>
<p>In order to use GeoDjango, you will need to add your Python and OSGeo4W
directories to your Windows system <code class="docutils literal"><span class="pre">Path</span></code>, as well as create <code class="docutils literal"><span class="pre">GDAL_DATA</span></code>
and <code class="docutils literal"><span class="pre">PROJ_LIB</span></code> environment variables.  The following set of commands,
executable with <code class="docutils literal"><span class="pre">cmd.exe</span></code>, will set this up:</p>
<div class="highlight-bat"><div class="highlight"><pre><span class="k">set</span> <span class="nv">OSGEO4W_ROOT</span><span class="o">=</span>C:\OSGeo<span class="m">4</span>W
<span class="k">set</span> <span class="nv">PYTHON_ROOT</span><span class="o">=</span>C:\Python<span class="m">27</span>
<span class="k">set</span> <span class="nv">GDAL_DATA</span><span class="o">=</span><span class="nv">%OSGEO4W_ROOT%</span>\share\gdal
<span class="k">set</span> <span class="nv">PROJ_LIB</span><span class="o">=</span><span class="nv">%OSGEO4W_ROOT%</span>\share\proj
<span class="k">set</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">%PATH%</span>;<span class="nv">%PYTHON_ROOT%</span>;<span class="nv">%OSGEO4W_ROOT%</span>\bin
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> <span class="n">/v</span> Path <span class="n">/t</span> REG_EXPAND_SZ <span class="n">/f</span> <span class="n">/d</span> <span class="s2">&quot;%PATH%&quot;</span>
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> <span class="n">/v</span> GDAL_DATA <span class="n">/t</span> REG_EXPAND_SZ <span class="n">/f</span> <span class="n">/d</span> <span class="s2">&quot;%GDAL_DATA%&quot;</span>
reg ADD <span class="s2">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment&quot;</span> <span class="n">/v</span> PROJ_LIB <span class="n">/t</span> REG_EXPAND_SZ <span class="n">/f</span> <span class="n">/d</span> <span class="s2">&quot;%PROJ_LIB%&quot;</span>
</pre></div>
</div>
<p>For your convenience, these commands are available in the executable batch
script, <a class="reference download internal" href="../../../../_downloads/geodjango_setup.bat"><code class="xref download docutils literal"><span class="pre">geodjango_setup.bat</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Administrator privileges are required to execute these commands.
To do this, right-click on <a class="reference download internal" href="../../../../_downloads/geodjango_setup.bat"><code class="xref download docutils literal"><span class="pre">geodjango_setup.bat</span></code></a> and select
<span class="menuselection">Run as administrator</span>. You need to log out and log back in again
for the settings to take effect.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you customized the Python or OSGeo4W installation directories,
then you will need to modify the <code class="docutils literal"><span class="pre">OSGEO4W_ROOT</span></code> and/or <code class="docutils literal"><span class="pre">PYTHON_ROOT</span></code>
variables accordingly.</p>
</div>
</div>
<div class="section" id="install-django-and-set-up-database">
<h4>Install Django and set up database<a class="headerlink" href="#install-django-and-set-up-database" title="Permalink to this headline">¶</a></h4>
<p>Finally, <a class="reference internal" href="../../../../topics/install.html#installing-official-release"><span>install Django</span></a> on your system.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[1]</a></td><td>GeoDjango uses the <a class="reference external" href="http://docs.python.org/2.7/library/ctypes.html#ctypes.util.find_library" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">find_library()</span></code></a> routine from
<code class="docutils literal"><span class="pre">ctypes.util</span></code> to locate shared libraries.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id27" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[2]</a></td><td>The <code class="docutils literal"><span class="pre">psycopg2</span></code> Windows installers are packaged and maintained by
<a class="reference external" href="http://www.stickpeople.com/projects/python/win-psycopg/">Jason Erickson</a>.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
          </div>
	<hr/>
	<div>
		<p>扫码关注，获取更多内容</p>
		<img src="../../../../../../statics/img/qrcode.jpg" width="100" height="100" />
	</div>
	<!-- duoshuo start -->
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"pytabdocs"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = '../../../../../../statics/js/duoshuo.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>
	<!-- duoshuo end -->
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geolibs.html" class="btn btn-neutral float-right" title="Installing Geospatial libraries" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tutorial.html" class="btn btn-neutral" title="GeoDjango Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Django Software Foundation and contributors.
      Last updated on Oct 24, 2016.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   
  <script type="text/javascript" src="../../../../../../static/js/global.html" ></script>
  <script type="text/javascript">
        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F141f4ed9eb11f462fa19fdd960639134' type='text/javascript'%3E%3C/script%3E"));
  </script>
</body>

<!-- Mirrored from docs.pythontab.com/django/django1.5/ref/contrib/gis/install/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:57:24 GMT -->
</html>