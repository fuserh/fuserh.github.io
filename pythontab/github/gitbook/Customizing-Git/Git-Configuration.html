
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.pythontab.com/github/gitbook/Customizing-Git/Git-Configuration.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:56:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>配置 Git &mdash; Git中文手册 0.1 文档</title>
  
  
  
    
  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
  
   
  <script src="../_static/js/modernizr.min.js"></script>
</head>
<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index-2.html" class="icon icon-home"> Git中文手册
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.pythontab.com/github/gitbook/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Getting-Started/index.html">起步</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Basics/index.html">Git 基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Branching/index.html">Git 分支</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-on-the-Server/index.html">服务器上的 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Distributed-Git/index.html">分布式 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Tools/index.html">Git 工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">自定义 Git</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">配置 Git</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">客户端基本配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Git中的着色</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">外部的合并与比较工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">格式化与空白</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">服务器端配置</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Git-Attributes.html">Git属性</a></li>
<li class="toctree-l2"><a class="reference internal" href="Git-Hooks.html">Git挂钩</a></li>
<li class="toctree-l2"><a class="reference internal" href="An-Example-Git-Enforced-Policy.html">Git 强制策略实例</a></li>
<li class="toctree-l2"><a class="reference internal" href="Summary.html">总结</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Git-and-Other-Systems/index.html">Git 与其他系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Internals/index.html">Git 内部原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">命令索引</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index-2.html">Git中文手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index-2.html"> &mdash; Git中文手册 0.1 文档</a> &raquo;</li>
      
          <li><a href="index.html">自定义 Git</a> &raquo;</li>
      
    <li>配置 Git</li>
      <li class="wy-breadcrumbs-aside">
        
            <a href="../../../index.html" class="fa fa-github"> 在线手册中心</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="git">
<h1>配置 Git<a class="headerlink" href="#git" title="永久链接至标题">¶</a></h1>
<p>如第一章所言，用git config配置 Git，要做的第一件事就是设置名字和邮箱地址:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global user.name &quot;John Doe&quot;
$ git config --global user.email johndoe@example.com
</pre></div>
</div>
<p>从现在开始，你会了解到一些类似以上但更为有趣的设置选项来自定义 Git。</p>
<p>先过一遍第一章中提到的 Git 配置细节。Git 使用一系列的配置文件来存储你定义的偏好，它首先会查找/etc/gitconfig文件，该文件含有 对系统上所有用户及他们所拥有的仓库都生效的配置值（译注::gitconfig是全局配置文件）， 如果传递&#8211;system选项给git config命令， Git 会读写这个文件。</p>
<p>接下来 Git 会查找每个用户的~/.gitconfig文件，你能传递&#8211;global选项让 Git读写该文件。</p>
<p>最后 Git 会查找由用户定义的各个库中 Git 目录下的配置文件（.git/config），该文件中的值只对属主库有效。 以上阐述的三层配置从一般到特殊层层推进，如果定义的值有冲突，以后面层中定义的为准，例如::在.git/config和/etc/gitconfig的较量中， .git/config取得了胜利。虽然你也可以直接手动编辑这些配置文件，但是运行git config命令将会来得简单些。</p>
<div class="section" id="id1">
<h2>客户端基本配置<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>Git 能够识别的配置项被分为了两大类::客户端和服务器端，其中大部分基于你个人工作偏好，属于客户端配置。尽管有数不尽的选项，但我只阐述 其中经常使用或者会对你的工作流产生巨大影响的选项，如果你想观察你当前的 Git 能识别的选项列表，请运行:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --help
git config的手册页（译注::以man命令的显示方式）非常细致地罗列了所有可用的配置项。

core.editor
</pre></div>
</div>
<p>Git默认会调用你的环境变量editor定义的值作为文本编辑器，如果没有定义的话，会调用Vi来创建和编辑提交以及标签信息， 你可以使用core.editor改变默认编辑器:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.editor emacs
</pre></div>
</div>
<p>现在无论你的环境变量editor被定义成什么，Git 都会调用Emacs编辑信息:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">commit</span><span class="o">.</span><span class="n">template</span>
</pre></div>
</div>
<p>如果把此项指定为你系统上的一个文件，当你提交的时候， Git 会默认使用该文件定义的内容。 例如::你创建了一个模板文件$HOME/.gitmessage.txt，它看起来像这样:</p>
<div class="highlight-python"><div class="highlight"><pre>subject line

what happened

[ticket: X]
</pre></div>
</div>
<p>设置commit.template，当运行git commit时， Git 会在你的编辑器中显示以上的内容， 设置commit.template如下:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global commit.template $HOME/.gitmessage.txt
$ git commit
</pre></div>
</div>
<p>然后当你提交时，在编辑器中显示的提交信息如下:</p>
<div class="highlight-python"><div class="highlight"><pre>subject line

what happened

[ticket: X]
# Please enter the commit message for your changes. Lines starting
# with &#39;#&#39; will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#   (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)
#
# modified:   lib/test.rb
#
~
~
&quot;.git/COMMIT_EDITMSG&quot; 14L, 297C
</pre></div>
</div>
<p>如果你有特定的策略要运用在提交信息上，在系统上创建一个模板文件，设置 Git 默认使用它，这样当提交时，你的策略每次都会被运用:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">core</span><span class="o">.</span><span class="n">pager</span>
</pre></div>
</div>
<p>core.pager指定 Git 运行诸如log、diff等所使用的分页器，你能设置成用more或者任何你喜欢的分页器（默认用的是less）， 当然你也可以什么都不用，设置空字符串:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.pager &#39;&#39;
</pre></div>
</div>
<p>这样不管命令的输出量多少，都会在一页显示所有内容:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span><span class="o">.</span><span class="n">signingkey</span>
</pre></div>
</div>
<p>如果你要创建经签署的含附注的标签（正如第二章所述），那么把你的GPG签署密钥设置为配置项会更好，设置密钥ID如下:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global user.signingkey &lt;gpg-key-id&gt;
</pre></div>
</div>
<p>现在你能够签署标签，从而不必每次运行git tag命令时定义密钥:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -s &lt;tag-name&gt;
core.excludesfile
</pre></div>
</div>
<p>正如第二章所述，你能在项目库的.gitignore文件里头用模式来定义那些无需纳入 Git 管理的文件，这样它们不会出现在未跟踪列表， 也不会在你运行git add后被暂存。然而，如果你想用项目库之外的文件来定义那些需被忽略的文件的话，用core.excludesfile 通知 Git 该文件所处的位置，文件内容和.gitignore类似:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">help</span><span class="o">.</span><span class="n">autocorrect</span>
</pre></div>
</div>
<p>该配置项只在 Git 1.6.1及以上版本有效，假如你在Git 1.6中错打了一条命令，会显示:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git com
git: &#39;com&#39; is not a git-command. See &#39;git --help&#39;.

Did you mean this?
     commit
</pre></div>
</div>
<p>如果你把help.autocorrect设置成1（译注::启动自动修正），那么在只有一个命令被模糊匹配到的情况下，Git 会自动运行该命令。</p>
</div>
<div class="section" id="id2">
<h2>Git中的着色<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>Git能够为输出到你终端的内容着色，以便你可以凭直观进行快速、简单地分析，有许多选项能供你使用以符合你的偏好:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">color</span><span class="o">.</span><span class="n">ui</span>
</pre></div>
</div>
<p>Git会按照你需要自动为大部分的输出加上颜色，你能明确地规定哪些需要着色以及怎样着色，设置color.ui为true来打开所有的默认终端着色。</p>
<p>$ git config &#8211;global color.ui true</p>
<p>设置好以后，当输出到终端时，Git 会为之加上颜色。其他的参数还有false和always，false意味着不为输出着色，而always则表明在任何情况下都要着色，即使 Git 命令被重定向到文件或管道。Git 1.5.5版本引进了此项配置，如果你拥有的版本更老，你必须对颜色有关选项各自进行详细地设置。</p>
<p>你会很少用到color.ui = always，在大多数情况下，如果你想在被重定向的输出中插入颜色码，你能传递&#8211;color标志给 Git 命令来迫使它这么做，color.ui = true应该是你的首选:</p>
<div class="highlight-python"><div class="highlight"><pre>color.*
</pre></div>
</div>
<p>想要具体到哪些命令输出需要被着色以及怎样着色或者 Git 的版本很老，你就要用到和具体命令有关的颜色配置选项，它们都能被置为true、false或always:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">color</span><span class="o">.</span><span class="n">branch</span>
<span class="n">color</span><span class="o">.</span><span class="n">diff</span>
<span class="n">color</span><span class="o">.</span><span class="n">interactive</span>
<span class="n">color</span><span class="o">.</span><span class="n">status</span>
</pre></div>
</div>
<p>除此之外，以上每个选项都有子选项，可以被用来覆盖其父设置，以达到为输出的各个部分着色的目的。例如，让diff输出的改变信息以粗体、蓝色前景和黑色背景的形式显示:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global color.diff.meta “blue black bold”
</pre></div>
</div>
<p>你能设置的颜色值如::normal、black、red、green、yellow、blue、magenta、cyan、white，正如以上例子设置的粗体属性，想要设置字体属性的话，可以选择如::bold、dim、ul、blink、reverse。</p>
<p>如果你想配置子选项的话，可以参考git config帮助页。</p>
</div>
<div class="section" id="id3">
<h2>外部的合并与比较工具<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>虽然 Git 自己实现了diff,而且到目前为止你一直在使用它，但你能够用一个外部的工具替代它，除此以外，你还能用一个图形化的工具来合并和解决冲突从而不必自己手动解决。有一个不错且免费的工具可以被用来做比较和合并工作，它就是P4Merge（译注::Perforce图形化合并工具），我会展示它的安装过程。</p>
<p>P4Merge可以在所有主流平台上运行，现在开始大胆尝试吧。对于向你展示的例子，在Mac和Linux系统上，我会使用路径名，在Windows上，/usr/local/bin应该被改为你环境中的可执行路径。</p>
<p>下载P4Merge:</p>
<div class="highlight-python"><div class="highlight"><pre>http://www.perforce.com/perforce/downloads/component.html
</pre></div>
</div>
<p>首先把你要运行的命令放入外部包装脚本中，我会使用Mac系统上的路径来指定该脚本的位置，在其他系统上，它应该被放置在二进制文件p4merge所在的目录中。创建一个merge包装脚本，名字叫作extMerge，让它带参数调用p4merge二进制文件:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat /usr/local/bin/extMerge
#!/bin/sh
/Applications/p4merge.app/Contents/MacOS/p4merge $*
</pre></div>
</div>
<p>diff包装脚本首先确定传递过来7个参数，随后把其中2个传递给merge包装脚本，默认情况下， Git 传递以下参数给diff:</p>
<div class="highlight-python"><div class="highlight"><pre>path old-file old-hex old-mode new-file new-hex new-mode
</pre></div>
</div>
<p>由于你仅仅需要old-file和new-file参数，用diff包装脚本来传递它们吧:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat /usr/local/bin/extDiff
#!/bin/sh
[ $# -eq 7 ] &amp;&amp; /usr/local/bin/extMerge &quot;$2&quot; &quot;$5&quot;
</pre></div>
</div>
<p>确认这两个脚本是可执行的:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo chmod +x /usr/local/bin/extMerge
$ sudo chmod +x /usr/local/bin/extDiff
</pre></div>
</div>
<p>现在来配置使用你自定义的比较和合并工具吧。这需要许多自定义设置::merge.tool通知 Git 使用哪个合并工具；mergetool.*.cmd规定命令运行的方式；mergetool.trustExitCode会通知 Git 程序的退出是否指示合并操作成功；diff.external通知 Git 用什么命令做比较。因此，你能运行以下4条配置命令:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global merge.tool extMerge
$ git config --global mergetool.extMerge.cmd \
    &#39;extMerge &quot;$BASE&quot; &quot;$LOCAL&quot; &quot;$REMOTE&quot; &quot;$MERGED&quot;&#39;
$ git config --global mergetool.trustExitCode false
$ git config --global diff.external extDiff
</pre></div>
</div>
<p>或者直接编辑~/.gitconfig文件如下:</p>
<div class="highlight-python"><div class="highlight"><pre>[merge]
  tool = extMerge
[mergetool &quot;extMerge&quot;]
  cmd = extMerge &quot;$BASE&quot; &quot;$LOCAL&quot; &quot;$REMOTE&quot; &quot;$MERGED&quot;
  trustExitCode = false
[diff]
  external = extDiff
</pre></div>
</div>
<p>设置完毕后，运行diff命令:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git diff 32d1776b1^ 32d1776b1
</pre></div>
</div>
<p>命令行居然没有发现diff命令的输出，其实，Git 调用了刚刚设置的P4Merge，它看起来像图7-1这样:</p>
<img alt="../_images/18333fig0701-tn.png" src="../_images/18333fig0701-tn.png" />
<p>Figure 7-1. P4Merge.</p>
<p>当你设法合并两个分支，结果却有冲突时，运行git mergetool，Git 会调用P4Merge让你通过图形界面来解决冲突。</p>
<p>设置包装脚本的好处是你能简单地改变diff和merge工具，例如把extDiff和extMerge改成KDiff3，要做的仅仅是编辑extMerge脚本文件:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat /usr/local/bin/extMerge
#!/bin/sh
/Applications/kdiff3.app/Contents/MacOS/kdiff3 $*
</pre></div>
</div>
<p>现在 Git 会使用KDiff3来做比较、合并和解决冲突。</p>
<p>Git预先设置了许多其他的合并和解决冲突的工具，而你不必设置cmd。可以把合并工具设置为::kdiff3、opendiff、tkdiff、meld、xxdiff、emerge、vimdiff、gvimdiff。如果你不想用到KDiff3的所有功能，只是想用它来合并，那么kdiff3正符合你的要求，运行:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global merge.tool kdiff3
</pre></div>
</div>
<p>如果运行了以上命令，没有设置extMerge和extDiff文件，Git 会用KDiff3做合并，让通常内设的比较工具来做比较。</p>
</div>
<div class="section" id="id4">
<h2>格式化与空白<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>格式化与空白是许多开发人员在协作时，特别是在跨平台情况下，遇到的令人头疼的细小问题。由于编辑器的不同或者Windows程序员在跨平台项目中的文件行尾加入了回车换行符，一些细微的空格变化会不经意地进入大家合作的工作或提交的补丁中。不用怕，Git 的一些配置选项会帮助你解决这些问题:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">core</span><span class="o">.</span><span class="n">autocrlf</span>
</pre></div>
</div>
<p>假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。</p>
<p>Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.autocrlf true
</pre></div>
</div>
<p>Linux或Mac系统使用LF作为行结束符，因此你不想 Git 在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉 Git 在提交时把CRLF转换成LF，签出时不转换:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.autocrlf input
</pre></div>
</div>
<p>这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。</p>
<p>如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.autocrlf false
core.whitespace
</pre></div>
</div>
<p>Git预先设置了一些选项来探测和修正空白问题，其4种主要选项中的2个默认被打开，另2个被关闭，你可以自由地打开或关闭它们。</p>
<p>默认被打开的2个选项是trailing-space和space-before-tab，trailing-space会查找每行结尾的空格，space-before-tab会查找每行开头的制表符前的空格。</p>
<p>默认被关闭的2个选项是indent-with-non-tab和cr-at-eol，indent-with-non-tab会查找8个以上空格（非制表符）开头的行，cr-at-eol让 Git 知道行尾回车符是合法的。</p>
<p>设置core.whitespace，按照你的意图来打开或关闭选项，选项以逗号分割。通过逗号分割的链中去掉选项或在选项前加-来关闭，例如，如果你想要打开除了cr-at-eol之外的所有选项:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.whitespace \
    trailing-space,space-before-tab,indent-with-non-tab
</pre></div>
</div>
<p>当你运行git diff命令且为输出着色时，Git 探测到这些问题，因此你也许在提交前能修复它们，当你用git apply打补丁时同样也会从中受益。如果正准备运用的补丁有特别的空白问题，你可以让 Git 发警告:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git apply --whitespace=warn &lt;patch&gt;
</pre></div>
</div>
<p>或者让 Git 在打上补丁前自动修正此问题:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git apply --whitespace=fix &lt;patch&gt;
</pre></div>
</div>
<p>这些选项也能运用于衍合。如果提交了有空白问题的文件但还没推送到上流，你可以运行带有&#8211;whitespace=fix选项的rebase来让Git在重写补丁时自动修正它们。</p>
</div>
<div class="section" id="id5">
<h2>服务器端配置<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>Git服务器端的配置选项并不多，但仍有一些饶有生趣的选项值得你一看。</p>
<blockquote>
<div>receive.fsckObjects</div></blockquote>
<p>Git默认情况下不会在推送期间检查所有对象的一致性。虽然会确认每个对象的有效性以及是否仍然匹配SHA-1检验和，但 Git 不会在每次推送时都检查一致性。对于 Git 来说，库或推送的文件越大，这个操作代价就相对越高，每次推送会消耗更多时间，如果想在每次推送时 Git 都检查一致性，设置 receive.fsckObjects 为true来强迫它这么做:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --system receive.fsckObjects true
</pre></div>
</div>
<p>现在 Git 会在每次推送生效前检查库的完整性，确保有问题的客户端没有引入破坏性的数据:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">receive</span><span class="o">.</span><span class="n">denyNonFastForwards</span>
</pre></div>
</div>
<p>如果对已经被推送的提交历史做衍合，继而再推送，又或者以其它方式推送一个提交历史至远程分支，且该提交历史没在这个远程分支中，这样的推送会被拒绝。这通常是个很好的禁止策略，但有时你在做衍合并确定要更新远程分支，可以在push命令后加-f标志来强制更新。</p>
<p>要禁用这样的强制更新功能，可以设置receive.denyNonFastForwards:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --system receive.denyNonFastForwards true
</pre></div>
</div>
<p>稍后你会看到，用服务器端的接收钩子也能达到同样的目的。这个方法可以做更细致的控制，例如::禁用特定的用户做强制更新:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">receive</span><span class="o">.</span><span class="n">denyDeletes</span>
</pre></div>
</div>
<p>规避denyNonFastForwards策略的方法之一就是用户删除分支，然后推回新的引用。在更新的 Git 版本中（从1.6.1版本开始），把receive.denyDeletes设置为true:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --system receive.denyDeletes true
</pre></div>
</div>
<p>这样会在推送过程中阻止删除分支和标签 — 没有用户能够这么做。要删除远程分支，必须从服务器手动删除引用文件。通过用户访问控制列表也能这么做，在本章结尾将会介绍这些有趣的方式。</p>
</div>
</div>


           </div>
          </div>
	<hr/>
	<div>
		<p>扫码关注，获取更多内容</p>
		<img src="../../../statics/img/qrcode.jpg" width="100" height="100" />
	</div>
	<!-- duoshuo start -->
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"pytabdocs"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = '../../../statics/js/duoshuo.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>
	<!-- duoshuo end -->
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Git-Attributes.html" class="btn btn-neutral float-right" title="Git属性" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="自定义 Git" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2015, nosy.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   
  <script type="text/javascript" src="../../../static/js/global.html" ></script>
  <script type="text/javascript">
        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F141f4ed9eb11f462fa19fdd960639134' type='text/javascript'%3E%3C/script%3E"));
  </script>
</body>

<!-- Mirrored from docs.pythontab.com/github/gitbook/Customizing-Git/Git-Configuration.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:56:28 GMT -->
</html>