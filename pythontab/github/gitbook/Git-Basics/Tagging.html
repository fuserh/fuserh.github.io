
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from docs.pythontab.com/github/gitbook/Git-Basics/Tagging.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:55:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>打标签 &mdash; Git中文手册 0.1 文档</title>
  
  
  
    
  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
  
   
  <script src="../_static/js/modernizr.min.js"></script>
</head>
<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index-2.html" class="icon icon-home"> Git中文手册
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://docs.pythontab.com/github/gitbook/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Getting-Started/index.html">起步</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Git 基础</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Getting-a-Git-Repository.html">取得项目的 Git 仓库</a></li>
<li class="toctree-l2"><a class="reference internal" href="Recording-Changes-to-the-Repository.html">记录每次更新到仓库</a></li>
<li class="toctree-l2"><a class="reference internal" href="Viewing-the-Commit-History.html">查看提交历史</a></li>
<li class="toctree-l2"><a class="reference internal" href="Undoing-Things.html">撤消操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="Working-with-Remotes.html">远程仓库的使用</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">打标签</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">列出已有标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">新建标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">含附注的标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">签署标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">轻量级标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">验证标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">后期加注标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">分享标签</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tips-and-Tricks.html">技巧和窍门</a></li>
<li class="toctree-l2"><a class="reference internal" href="Summary.html">小结</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Branching/index.html">Git 分支</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-on-the-Server/index.html">服务器上的 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Distributed-Git/index.html">分布式 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Tools/index.html">Git 工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Customizing-Git/index.html">自定义 Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-and-Other-Systems/index.html">Git 与其他系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Git-Internals/index.html">Git 内部原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">命令索引</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index-2.html">Git中文手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index-2.html"> &mdash; Git中文手册 0.1 文档</a> &raquo;</li>
      
          <li><a href="index.html">Git 基础</a> &raquo;</li>
      
    <li>打标签</li>
      <li class="wy-breadcrumbs-aside">
        
            <a href="../../../index.html" class="fa fa-github"> 在线手册中心</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>打标签<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>同大多数 VCS 一样，Git 也可以对某一时间点上的版本打上标签。人们在发布某个软件版本（比如 v1.0 等等）的时候，经常这么做。本节我们一起来学习如何列出所有可用的标签，如何新建标签，以及各种不同类型标签之间的差别。</p>
<div class="section" id="id2">
<h2>列出已有标签<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>列出现有标签的命令非常简单，直接运行 git tag 即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag
v0.1
v1.3
</pre></div>
</div>
<p>显示的标签按字母顺序排列，所以标签的先后并不表示重要程度的轻重。</p>
<p>我们可以用特定的搜索模式列出符合条件的标签。在 Git 自身项目仓库中，有着超过 240 个标签，如果你只对 1.4.2 系列的版本感兴趣，可以运行下面的命令:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -l &#39;v1.4.2.*&#39;
v1.4.2.1
v1.4.2.2
v1.4.2.3
v1.4.2.4
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>新建标签<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>Git 使用的标签有两种类型:轻量级的（lightweight）和含附注的（annotated）。轻量级标签就像是个不会变化的分支，实际上它就是个指向特定提交对象的引用。而含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息；当然，如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题。</p>
</div>
<div class="section" id="id4">
<h2>含附注的标签<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>创建一个含附注类型的标签非常简单，用 -a （译注::取 annotated 的首字母）指定标签名字即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -a v1.4 -m &#39;my version 1.4&#39;
$ git tag
v0.1
v1.3
v1.4
</pre></div>
</div>
<p>而 -m 选项则指定了对应的标签说明，Git 会将此说明一同保存在标签对象中。如果没有给出该选项，Git 会启动文本编辑软件供你输入标签说明。</p>
<p>可以使用 git show 命令查看相应标签的版本信息，并连同显示打标签时的提交对象:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git show v1.4
tag v1.4
Tagger: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Feb 9 14:45:11 2009 -0800

my version 1.4
commit 15027957951b64cf874c3557a0f3547bd83b3ff6
Merge: 4a447f7... a6b4c97...
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sun Feb 8 19:02:46 2009 -0800

    Merge branch &#39;experiment&#39;
</pre></div>
</div>
<p>我们可以看到在提交对象信息上面，列出了此标签的提交者和提交时间，以及相应的标签说明。</p>
</div>
<div class="section" id="id5">
<h2>签署标签<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>如果你有自己的私钥，还可以用 GPG 来签署标签，只需要把之前的 -a 改为 -s （译注:: 取 signed 的首字母）即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -s v1.5 -m &#39;my signed 1.5 tag&#39;
You need a passphrase to unlock the secret key for
user: &quot;Scott Chacon &lt;schacon@gee-mail.com&gt;&quot;
1024-bit DSA key, ID F721C45A, created 2009-02-09
</pre></div>
</div>
<p>现在再运行 git show 会看到对应的 GPG 签名也附在其内:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git show v1.5
tag v1.5
Tagger: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Feb 9 15:22:20 2009 -0800

my signed 1.5 tag
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)

iEYEABECAAYFAkmQurIACgkQON3DxfchxFr5cACeIMN+ZxLKggJQf0QYiQBwgySN
Ki0An2JeAVUCAiJ7Ox6ZEtK+NvZAj82/
=WryJ
-----END PGP SIGNATURE-----
commit 15027957951b64cf874c3557a0f3547bd83b3ff6
Merge: 4a447f7... a6b4c97...
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sun Feb 8 19:02:46 2009 -0800

    Merge branch &#39;experiment&#39;
</pre></div>
</div>
<p>稍后我们再学习如何验证已经签署的标签。</p>
</div>
<div class="section" id="id6">
<h2>轻量级标签<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>轻量级标签实际上就是一个保存着对应提交对象的校验和信息的文件。要创建这样的标签，一个 -a，-s 或 -m 选项都不用，直接给出标签名字即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag v1.4-lw
$ git tag
v0.1
v1.3
v1.4
v1.4-lw
v1.5
</pre></div>
</div>
<p>现在运行 git show 查看此标签信息，就只有相应的提交对象摘要:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git show v1.4-lw
commit 15027957951b64cf874c3557a0f3547bd83b3ff6
Merge: 4a447f7... a6b4c97...
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Sun Feb 8 19:02:46 2009 -0800

    Merge branch &#39;experiment&#39;
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>验证标签<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
<p>可以使用 git tag -v [tag-name] （译注::取 verify 的首字母）的方式验证已经签署的标签。此命令会调用 GPG 来验证签名，所以你需要有签署者的公钥，存放在 keyring 中，才能验证:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -v v1.4.2.1
object 883653babd8ee7ea23e6a5c392bb739348b1eb61
type commit
tag v1.4.2.1
tagger Junio C Hamano &lt;junkio@cox.net&gt; 1158138501 -0700

GIT 1.4.2.1

Minor fixes since 1.4.2, including git-mv and git-http with alternates.
gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A
gpg: Good signature from &quot;Junio C Hamano &lt;junkio@cox.net&gt;&quot;
gpg:                 aka &quot;[jpeg image of size 1513]&quot;
Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A
</pre></div>
</div>
<p>若是没有签署者的公钥，会报告类似下面这样的错误:</p>
<div class="highlight-python"><div class="highlight"><pre>gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A
gpg: Can&#39;t check signature: public key not found
error: could not verify the tag &#39;v1.4.2.1&#39;
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h2>后期加注标签<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<p>你甚至可以在后期对早先的某次提交加注标签。比如在下面展示的提交历史中:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git log --pretty=oneline
15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch &#39;experiment&#39;
a6b4c97498bd301d84096da251c98a07c7723e65 beginning write support
0d52aaab4479697da7686c15f77a3d64d9165190 one more thing
6d52a271eda8725415634dd79daabbc4d9b6008e Merge branch &#39;experiment&#39;
0b7434d86859cc7b8c3d5e1dddfed66ff742fcbc added a commit function
4682c3261057305bdd616e23b64b0857d832627b added a todo file
166ae0c4d3f420721acbb115cc33848dfcc2121a started write support
9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile
964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo
8a5cbc430f1a9c3d00faaeffd07798508422908a updated readme
</pre></div>
</div>
<p>我们忘了在提交 “updated rakefile” 后为此项目打上版本号 v1.2，没关系，现在也能做。只要在打标签的时候跟上对应提交对象的校验和（或前几位字符）即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag -a v1.2 9fceb02
</pre></div>
</div>
<p>可以看到我们已经补上了标签:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag
v0.1
v1.2
v1.3
v1.4
v1.4-lw
v1.5

$ git show v1.2
tag v1.2
Tagger: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Feb 9 15:32:16 2009 -0800

version 1.2
commit 9fceb02d0ae598e95dc970b74767f19372d61af8
Author: Magnus Chacon &lt;mchacon@gee-mail.com&gt;
Date:   Sun Apr 27 20:43:35 2008 -0700

    updated rakefile
...
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h2>分享标签<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h2>
<p>默认情况下，git push 并不会把标签传送到远端服务器上，只有通过显式命令才能分享标签到远端仓库。其命令格式如同推送分支，运行 git push origin [tagname] 即可:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git push origin v1.5
Counting objects: 50, done.
Compressing objects: 100% (38/38), done.
Writing objects: 100% (44/44), 4.56 KiB, done.
Total 44 (delta 18), reused 8 (delta 1)
To git@github.com:schacon/simplegit.git
* [new tag]         v1.5 -&gt; v1.5
</pre></div>
</div>
<p>如果要一次推送所有本地新增的标签上去，可以使用 &#8211;tags 选项:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git push origin --tags
Counting objects: 50, done.
Compressing objects: 100% (38/38), done.
Writing objects: 100% (44/44), 4.56 KiB, done.
Total 44 (delta 18), reused 8 (delta 1)
To git@github.com:schacon/simplegit.git
 * [new tag]         v0.1 -&gt; v0.1
 * [new tag]         v1.2 -&gt; v1.2
 * [new tag]         v1.4 -&gt; v1.4
 * [new tag]         v1.4-lw -&gt; v1.4-lw
 * [new tag]         v1.5 -&gt; v1.5
</pre></div>
</div>
<p>现在，其他人克隆共享仓库或拉取数据同步后，也会看到这些标签。</p>
</div>
</div>


           </div>
          </div>
	<hr/>
	<div>
		<p>扫码关注，获取更多内容</p>
		<img src="../../../statics/img/qrcode.jpg" width="100" height="100" />
	</div>
	<!-- duoshuo start -->
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"pytabdocs"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = '../../../statics/js/duoshuo.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>
	<!-- duoshuo end -->
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Tips-and-Tricks.html" class="btn btn-neutral float-right" title="技巧和窍门" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Working-with-Remotes.html" class="btn btn-neutral" title="远程仓库的使用" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2015, nosy.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   
  <script type="text/javascript" src="../../../static/js/global.html" ></script>
  <script type="text/javascript">
        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F141f4ed9eb11f462fa19fdd960639134' type='text/javascript'%3E%3C/script%3E"));
  </script>
</body>

<!-- Mirrored from docs.pythontab.com/github/gitbook/Git-Basics/Tagging.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 04 Oct 2022 03:55:07 GMT -->
</html>